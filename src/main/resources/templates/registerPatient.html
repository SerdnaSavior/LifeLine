<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register Patient</title>
     <link rel="stylesheet" href="styles.css"> <!-- Optional: Link to your CSS file -->
</head>
<body>

    <div th:replace= "~{layout :: header}"></div>
    <div class="page">
        <div class="registerPatientBox">
            <h2>Register New Patient</h2>
    
            <form th:action="@{/registerPatient}" th:object="${patient}" method="post">
                <!-- Name -->
                <div class="form-group">
                    <label for="first_name">First Name:</label>
                    <input type="text" id="first_name" th:field="*{first_name}" placeholder="Enter patient name" maxlength="50" required>
                        <span id="error_first_name" class="error-message"></span>
                    <label for="last_name">Last Name:</label>
                    <input type="text" id="last_name" th:field="*{last_name}" placeholder="Enter patient name" maxlength="50" required>
                        <span id="error_last_name" class="error-message"></span>
                </div>
    
                <!-- Date of Birth -->
                <div class="form-group">
                    <label for="dob">Date of Birth:</label>
                    <input type="date" id="dob" th:field="*{dob}" required>
                        <span id="error_dob" class="error-message"></span>
                </div>
    
                <!-- Gender -->
                <div class="form-group">
                    <label for="gender">Gender:</label>
                        <span id="error_gender" class="error-message"></span>
                    <select id="gender" th:field="*{gender}" required>
                        <option value="" disabled selected>Select gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
    
                <!-- Blood Type -->
                <div class="form-group">
                    <label for="blood_type">Blood Type:</label>
                    <input type="text" id="blood_type" th:field="*{blood_type}" placeholder="Enter blood type">
                </div>
    
                <!-- Marital Status -->
                <div class="form-group">
                    <label for="maritalStatus">Marital Status:</label>
                    <select id="maritalStatus" th:field="*{marital_status}">
                        <option value="" disabled selected>Select marital status</option>
                        <option value="Single">Single</option>
                        <option value="Married">Married</option>
                        <option value="Divorced">Divorced</option>
                        <option value="Widowed">Widowed</option>
                    </select>
                </div>
    
                <!-- Address -->
                <div class="form-group">
                    <label for="address">Address:</label>
                    <input type="text" id="address" th:field="*{address}" placeholder="Enter patient address" maxlength="100" required>
                </div>
    
                <!-- City, State, Postal Code -->
                <div class="form-group">
                    <label for="city">City:</label>
                    <input type="text" id="city" th:field="*{city}" placeholder="Enter city" required>
                </div>
    
                <div class="form-group">
                    <label for="state">State:</label>
                    <input type="text" id="state" th:field="*{state}" placeholder="Enter state" required>
                </div>
    
                <div class="form-group">
                    <label for="postalCode">Postal Code:</label>
                    <input type="text" id="postalCode" th:field="*{postal_code}" placeholder="Enter postal code" required>

                </div>
    
                <!-- Contact Details -->
                <div class="form-group">
                    <label for="phoneNumber">Phone Number:</label>
                    <input type="tel" id="phoneNumber" th:field="*{phone_number}" placeholder="Enter contact number" pattern="/^\d{10}$/" required>
                        <span id="error_phoneNumber" class="error-message"></span>
                </div>
    
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" th:field="*{email}" placeholder="Enter email address" pattern="/^[^\s@]+@[^\s@]+\.[^\s@]+$/" required>
                        <span id="error_email" class="error-message"></span>
                </div>
    
                <!-- Emergency Contact -->
                <h2>Emergency Contact</h2>
                <div class="form-group">
                    <label for="emergencyContactName">Emergency Contact Name:</label>
                    <input type="text" id="emergencyContactName" th:field="*{emergency_contact_name}" placeholder="Enter emergency contact name" required>
                </div>
    
                <div class="form-group">
                    <label for="emergencyContactPhone">Emergency Contact Phone:</label>
                    <input type="tel" id="emergencyContactPhone" th:field="*{emergency_contact_phone}" placeholder="Enter emergency contact phone number" required>
                </div>
    
                <!-- Medical Information -->
                <h2>Medical Information</h2>
                <div class="form-group">
                    <label for="allergies">Allergies:</label>
                    <input type="text" id="allergies" th:field="*{allergies}" placeholder="Enter allergies (comma-separated)">
                </div>
    
                <div class="form-group">
                    <label for="height">Height (cm):</label>
                    <input type="number" id="height" th:field="*{height}" placeholder="Enter height in cm">
                </div>
    
                <div class="form-group">
                    <label for="weight">Weight (kg):</label>
                    <input type="number" id="weight" th:field="*{weight}" placeholder="Enter weight in kg">
                </div>
    
                <div class="form-group">
                    <label for="bloodPressure">Blood Pressure:</label>
                    <input type="text" id="bloodPressure" th:field="*{blood_pressure}" placeholder="Enter blood pressure">
                </div>
    
                <div class="form-group">
                    <label for="medicalHistory">Medical History:</label>
                    <textarea id="medicalHistory" th:field="*{medical_history}" placeholder="Enter medical history"></textarea>
                </div>
    
                <!-- Insurance Information -->
                <h2>Insurance Information</h2>
                <div class="form-group">
                    <label for="insuranceProvider">Insurance Provider:</label>
                    <input type="text" id="insuranceProvider" th:field="*{insurance_provider}" placeholder="Enter insurance provider">
                </div>
    
                <div class="form-group">
                    <label for="insurancePolicyNumber">Insurance Policy Number:</label>
                    <input type="text" id="insurancePolicyNumber" th:field="*{insurance_policy_number}" placeholder="Enter policy number">
                </div>
    
                <div class="form-group">
                    <label for="insuranceExpirationDate">Insurance Expiration Date:</label>
                    <input type="date" id="insuranceExpirationDate" th:field="*{insurance_expiration_date}">
                </div>
    
                <div class="form-group">
                    <label for="insuranceType">Insurance Type:</label>
                    <input type="text" id="insuranceType" th:field="*{insurance_type}" placeholder="Enter insurance type">
                </div>
    
                <!-- Administrative Information -->
                <h2>Administrative Details</h2>
                <div class="form-group">
                    <label for="doctorAssigned">Doctor Assigned:</label>
                    <input type="text" id="doctorAssigned" th:field="*{doctor_assigned}" placeholder="Enter doctor's name">
                </div>
    
                <div class="form-group">
                    <label for="appointmentHistory">Appointment History:</label>
                    <textarea id="appointmentHistory" th:field="*{appointment_history}" placeholder="Enter appointment history (comma-separated)"></textarea>
                </div>
    
                <!-- Submit Button -->
                <div class="form-group">
                    <button type="submit">Register Patient</button>
                </div>
            </form>
        </div>
    </div>
    
    <div th:replace= "~{layout :: footer }"></div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.querySelector('form'); // Select the form
    
            form.addEventListener('submit', function (event) {
                let isValid = true; // Flag to track overall form validity
    
                // Clear previous error messages
                document.querySelectorAll('.error-message').forEach(span => span.textContent = '');
    
                // First Name Validation
                const firstName = document.getElementById('first_name').value.trim();
                const errorFirstName = document.getElementById('error_first_name');
                if (firstName === '') {
                    isValid = false;
                    errorFirstName.textContent = "First Name is required.";
                }
    
                // Last Name Validation
                const lastName = document.getElementById('last_name').value.trim();
                const errorLastName = document.getElementById('error_last_name');
                if (lastName === '') {
                    isValid = false;
                    errorLastName.textContent = "Last Name is required.";
                }
    
                // Date of Birth Validation
                const dob = document.getElementById('dob').value.trim();
                const errorDob = document.getElementById('error_dob');
                if (!dob) {
                    isValid = false;
                    errorDob.textContent = "Date of Birth is required.";
                }
    
                // Phone Number Validation (10-digit format)
                const phone = document.getElementById('phoneNumber').value.trim();
                const errorPhone = document.getElementById('error_phoneNumber');
                const phonePattern = /^\d{10}$/;
                if (!phonePattern.test(phone)) {
                    isValid = false;
                    errorPhone.textContent = "Phone Number must be a valid 10-digit number.";
                }
    
                // Email Validation
                const email = document.getElementById('email').value.trim();
                const errorEmail = document.getElementById('error_email');
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(email)) {
                    isValid = false;
                    errorEmail.textContent = "Email must be a valid email address.";
                }
    
                // Gender Validation
                const gender = document.getElementById('gender').value;
                const errorGender = document.getElementById('error_gender');
                if (!gender) {
                    isValid = false;
                    errorGender.textContent = "Gender must be selected.";
                }
    
                // Prevent form submission if invalid
                if (!isValid) {
                    event.preventDefault(); // Prevent form submission
                }
            });
        });
    </script>
</body>
</html>
