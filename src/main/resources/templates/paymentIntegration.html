<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Integration</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<!-- Trigger Button -->
<button onclick="openModal()">Make a Payment</button>

<!-- Payment Modal -->
<div class="modal" id="paymentModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Payment Details</h2>
            <button onclick="closeModal()">X</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="cardNumber">Card Number</label>
                <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" required>
                <span class="error-message" id="cardNumberError">Invalid card number.</span>
            </div>
            <div class="form-group">
                <label for="expirationDate">Expiration Date</label>
                <input type="text" id="expirationDate" placeholder="MM/YY" required>
                <span class="error-message" id="expirationDateError">Invalid expiration date.</span>
            </div>
            <div class="form-group">
                <label for="cvv">CVV</label>
                <input type="text" id="cvv" placeholder="123" required>
                <span class="error-message" id="cvvError">Invalid CVV.</span>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-close" onclick="closeModal()">Cancel</button>
            <button class="btn-submit" onclick="validatePayment()">Submit</button>
        </div>
    </div>
</div>

<script>
    // Open the modal
    function openModal() {
        document.getElementById('paymentModal').style.display = 'flex';
    }

    // Close the modal
    function closeModal() {
        document.getElementById('paymentModal').style.display = 'none';
    }

    // Validate payment fields
    function validatePayment() {
        const cardNumber = document.getElementById('cardNumber');
        const expirationDate = document.getElementById('expirationDate');
        const cvv = document.getElementById('cvv');

        const cardNumberError = document.getElementById('cardNumberError');
        const expirationDateError = document.getElementById('expirationDateError');
        const cvvError = document.getElementById('cvvError');

        let isValid = true;

        // Clear previous errors
        cardNumber.classList.remove('invalid');
        expirationDate.classList.remove('invalid');
        cvv.classList.remove('invalid');
        cardNumberError.style.display = 'none';
        expirationDateError.style.display = 'none';
        cvvError.style.display = 'none';

        // Validate card number (basic check for 16 digits)
        if (!/^\d{16}$/.test(cardNumber.value)) {
            isValid = false;
            cardNumber.classList.add('invalid');
            cardNumberError.style.display = 'block';
        }

        // Validate expiration date (MM/YY format)
        if (!/^(0[1-9]|1[0-2])\/\d{2}$/.test(expirationDate.value)) {
            isValid = false;
            expirationDate.classList.add('invalid');
            expirationDateError.style.display = 'block';
        }

        // Validate CVV (3 digits)
        if (!/^\d{3}$/.test(cvv.value)) {
            isValid = false;
            cvv.classList.add('invalid');
            cvvError.style.display = 'block';
        }

        if (isValid) {
            alert('Payment information is valid.');
            closeModal();
        }
    }
</script>
</body>
</html>